{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Admin/Desktop/TextbookAnalysisSystem/TextbookAnalysisSystem/deepseek-chat-app/src/components/ChatInterface.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport MessageList from './MessageList';\nimport InputArea from './InputArea';\nimport { sendMessageStream, simulateStreamResponse } from '../api/chatApi';\nimport './ChatInterface.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterface = () => {\n  _s();\n  const [messages, setMessages] = useState([{\n    id: '1',\n    content: '‰Ω†Â•ΩÔºÅÊàëÊòØAIÂä©ÊâãÔºåÂü∫‰∫éDeepSeekÊ®°Âûã„ÄÇÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºü',\n    sender: 'assistant',\n    timestamp: new Date()\n  }]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isUsingRealAPI, setIsUsingRealAPI] = useState(false);\n  const [abortController, setAbortController] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  // Ëá™Âä®ÊªöÂä®Âà∞Â∫ïÈÉ®\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  // ÂÅúÊ≠¢ÁîüÊàêÂáΩÊï∞\n  const stopGeneration = useCallback(() => {\n    if (abortController) {\n      abortController.abort();\n      setAbortController(null);\n      setIsLoading(false);\n\n      // Ê∑ªÂä†ÂÅúÊ≠¢ÊèêÁ§∫Âà∞ÂΩìÂâçÊ≠£Âú®ÁîüÊàêÁöÑÊ∂àÊÅØ\n      setMessages(prev => {\n        const lastMessage = prev[prev.length - 1];\n        if (lastMessage.sender === 'assistant' && lastMessage.content) {\n          return [...prev.slice(0, -1), {\n            ...lastMessage,\n            content: lastMessage.content + '\\n\\n**[Â∑≤ÂÅúÊ≠¢ÁîüÊàê]**'\n          }];\n        }\n        return prev;\n      });\n      console.log('ÁîüÊàêÂ∑≤ÂÅúÊ≠¢');\n    }\n  }, [abortController]);\n  const handleSendMessage = async content => {\n    if (!content.trim() || isLoading) return;\n\n    // Â¶ÇÊûúÊúâÊ≠£Âú®ËøõË°åÁöÑÁîüÊàêÔºåÂÖàÂÅúÊ≠¢\n    if (isLoading && abortController) {\n      stopGeneration();\n      await new Promise(resolve => setTimeout(resolve, 100)); // Áü≠ÊöÇÂª∂Ëøü\n    }\n\n    // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ\n    const userMessage = {\n      id: Date.now().toString(),\n      content,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setIsLoading(true);\n\n    // ÂàõÂª∫AIÊ∂àÊÅØÔºàÂàùÂßã‰∏∫Á©∫Ôºâ\n    const aiMessageId = (Date.now() + 1).toString();\n    const aiMessage = {\n      id: aiMessageId,\n      content: '',\n      sender: 'assistant',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, aiMessage]);\n\n    // ÂàõÂª∫AbortControllerÁî®‰∫é‰∏≠Êñ≠ËØ∑Ê±Ç\n    const controller = new AbortController();\n    setAbortController(controller);\n    try {\n      let fullResponse = '';\n      const onChunk = chunk => {\n        fullResponse += chunk;\n        setMessages(prev => prev.map(msg => msg.id === aiMessageId ? {\n          ...msg,\n          content: fullResponse\n        } : msg));\n      };\n      const onComplete = () => {\n        setIsLoading(false);\n        setAbortController(null);\n        setMessages(prev => prev.map(msg => msg.id === aiMessageId ? {\n          ...msg,\n          content: fullResponse.trim()\n        } : msg));\n      };\n      const onError = error => {\n        // Â¶ÇÊûúÊòØ‰∏ªÂä®‰∏≠Êñ≠Ôºå‰∏çÊòæÁ§∫ÈîôËØØ\n        if (error.includes('abort') || controller.signal.aborted) {\n          setIsLoading(false);\n          setAbortController(null);\n          return;\n        }\n        console.error('Error:', error);\n        setMessages(prev => prev.map(msg => msg.id === aiMessageId ? {\n          ...msg,\n          content: `Êä±Ê≠âÔºåÊàëÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºö${error}\\n\\nÂ∑≤ÂàáÊç¢‰∏∫Ê®°ÊãüÊ®°ÂºèÔºå‰Ω†ÂèØ‰ª•ÁªßÁª≠ËÅäÂ§©„ÄÇ`\n        } : msg));\n        setIsLoading(false);\n        setAbortController(null);\n        setIsUsingRealAPI(false);\n      };\n      if (isUsingRealAPI) {\n        // ‰ΩøÁî®ÁúüÂÆûDeepSeek APIÔºàÈúÄË¶Å‰øÆÊîπAPIÂáΩÊï∞ÊîØÊåÅAbortControllerÔºâ\n        await sendMessageStream(content, onChunk, onComplete, onError, controller // ‰º†ÈÄíAbortController\n        );\n      } else {\n        // Ê®°ÊãüAPI‰πüË¶ÅÊîØÊåÅ‰∏≠Êñ≠\n        await simulateStreamResponse(content, onChunk, onComplete, controller);\n      }\n    } catch (error) {\n      // Â¶ÇÊûúÊòØ‰∏≠Êñ≠ÈîôËØØÔºåÂøΩÁï•\n      if (error instanceof Error && (error.name === 'AbortError' || error.message.includes('aborted'))) {\n        setIsLoading(false);\n        setAbortController(null);\n        return;\n      }\n      console.error('Error:', error);\n      setMessages(prev => prev.map(msg => msg.id === aiMessageId ? {\n        ...msg,\n        content: 'Êä±Ê≠âÔºåÁΩëÁªúËøûÊé•Âá∫Áé∞ÈóÆÈ¢òÔºåËØ∑Á®çÂêéÂÜçËØï„ÄÇ'\n      } : msg));\n      setIsLoading(false);\n      setAbortController(null);\n      setIsUsingRealAPI(false);\n    }\n  };\n\n  // Ê∑ªÂä†ÈîÆÁõòÂø´Êç∑ÈîÆÊîØÊåÅ\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // Ctrl+. Êàñ Esc ÂÅúÊ≠¢ÁîüÊàê\n      if (e.ctrlKey && e.key === '.' || e.key === 'Escape') {\n        if (isLoading) {\n          e.preventDefault();\n          stopGeneration();\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isLoading, stopGeneration]);\n  const handleClearChat = () => {\n    // Â¶ÇÊûúÊ≠£Âú®ÁîüÊàêÔºåÂÖàÂÅúÊ≠¢\n    if (isLoading && abortController) {\n      stopGeneration();\n    }\n    setMessages([{\n      id: Date.now().toString(),\n      content: 'ÂØπËØùÂ∑≤Ê∏ÖÁ©∫„ÄÇÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºü',\n      sender: 'assistant',\n      timestamp: new Date()\n    }]);\n  };\n  const toggleAPI = () => {\n    // Â¶ÇÊûúÊ≠£Âú®ÁîüÊàêÔºåÂÖàÂÅúÊ≠¢\n    if (isLoading && abortController) {\n      stopGeneration();\n    }\n    setIsUsingRealAPI(!isUsingRealAPI);\n    const status = !isUsingRealAPI ? 'ÁúüÂÆûDeepSeek API' : 'Ê®°ÊãüÊ®°Âºè';\n    alert(`Â∑≤ÂàáÊç¢Âà∞${status}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-interface\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\uD83E\\uDD16 DeepSeek AI\\u52A9\\u624B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"model-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"model-tag\",\n            children: \"DeepSeek\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-indicator\",\n            children: [\"\\u25CF \", isUsingRealAPI ? 'ÁúüÂÆûAPI' : 'Ê®°ÊãüÊ®°Âºè']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), isLoading && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"stop-button\",\n            onClick: stopGeneration,\n            title: \"\\u505C\\u6B62\\u751F\\u6210 (Esc \\u6216 Ctrl+.)\",\n            children: \"\\u23F9\\uFE0F \\u505C\\u6B62\\u751F\\u6210\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"api-toggle-button\",\n            onClick: toggleAPI,\n            title: isUsingRealAPI ? 'ÂàáÊç¢Âà∞Ê®°ÊãüÊ®°Âºè' : 'ÂàáÊç¢Âà∞ÁúüÂÆûAPI',\n            disabled: isLoading,\n            children: isUsingRealAPI ? 'üîå Ê®°ÊãüÊ®°Âºè' : '‚ö° ÁúüÂÆûAPI'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"clear-button\",\n        onClick: handleClearChat,\n        title: \"\\u6E05\\u7A7A\\u5BF9\\u8BDD\",\n        disabled: isLoading,\n        children: \"\\u6E05\\u7A7A\\u5BF9\\u8BDD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages-container\",\n      children: [/*#__PURE__*/_jsxDEV(MessageList, {\n        messages: messages,\n        isLoading: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InputArea, {\n      onSendMessage: handleSendMessage,\n      isLoading: isLoading,\n      onStopGeneration: stopGeneration // ‰º†ÈÄíÁªôInputArea\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), isUsingRealAPI && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"api-notice\",\n      children: [\"\\u26A1 \\u6B63\\u5728\\u4F7F\\u7528\\u771F\\u5B9EDeepSeek API\\uFF0C\\u8BF7\\u786E\\u4FDD\\u540E\\u7AEF\\u670D\\u52A1\\u5668\\u5DF2\\u542F\\u52A8\", isLoading && ' | Êåâ Esc Êàñ Ctrl+. ÂÅúÊ≠¢ÁîüÊàê']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"WlYUBkz/9AnahW3N4jQuKhCYH74=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","MessageList","InputArea","sendMessageStream","simulateStreamResponse","jsxDEV","_jsxDEV","ChatInterface","_s","messages","setMessages","id","content","sender","timestamp","Date","isLoading","setIsLoading","isUsingRealAPI","setIsUsingRealAPI","abortController","setAbortController","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","stopGeneration","abort","prev","lastMessage","length","slice","console","log","handleSendMessage","trim","Promise","resolve","setTimeout","userMessage","now","toString","aiMessageId","aiMessage","controller","AbortController","fullResponse","onChunk","chunk","map","msg","onComplete","onError","error","includes","signal","aborted","Error","name","message","handleKeyDown","e","ctrlKey","key","preventDefault","window","addEventListener","removeEventListener","handleClearChat","toggleAPI","status","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","disabled","ref","onSendMessage","onStopGeneration","_c","$RefreshReg$"],"sources":["/mnt/c/Users/Admin/Desktop/TextbookAnalysisSystem/TextbookAnalysisSystem/deepseek-chat-app/src/components/ChatInterface.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport MessageList from './MessageList';\nimport InputArea from './InputArea';\nimport { sendMessageStream, simulateStreamResponse } from '../api/chatApi';\nimport './ChatInterface.css';\n\ninterface Message {\n  id: string;\n  content: string;\n  sender: 'user' | 'assistant';\n  timestamp: Date;\n}\n\nconst ChatInterface: React.FC = () => {\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: '1',\n      content: '‰Ω†Â•ΩÔºÅÊàëÊòØAIÂä©ÊâãÔºåÂü∫‰∫éDeepSeekÊ®°Âûã„ÄÇÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºü',\n      sender: 'assistant',\n      timestamp: new Date()\n    }\n  ]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isUsingRealAPI, setIsUsingRealAPI] = useState(false);\n  const [abortController, setAbortController] = useState<AbortController | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Ëá™Âä®ÊªöÂä®Âà∞Â∫ïÈÉ®\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  // ÂÅúÊ≠¢ÁîüÊàêÂáΩÊï∞\n  const stopGeneration = useCallback(() => {\n    if (abortController) {\n      abortController.abort();\n      setAbortController(null);\n      setIsLoading(false);\n      \n      // Ê∑ªÂä†ÂÅúÊ≠¢ÊèêÁ§∫Âà∞ÂΩìÂâçÊ≠£Âú®ÁîüÊàêÁöÑÊ∂àÊÅØ\n      setMessages(prev => {\n        const lastMessage = prev[prev.length - 1];\n        if (lastMessage.sender === 'assistant' && lastMessage.content) {\n          return [...prev.slice(0, -1), {\n            ...lastMessage,\n            content: lastMessage.content + '\\n\\n**[Â∑≤ÂÅúÊ≠¢ÁîüÊàê]**'\n          }];\n        }\n        return prev;\n      });\n      \n      console.log('ÁîüÊàêÂ∑≤ÂÅúÊ≠¢');\n    }\n  }, [abortController]);\n\n  const handleSendMessage = async (content: string) => {\n    if (!content.trim() || isLoading) return;\n\n    // Â¶ÇÊûúÊúâÊ≠£Âú®ËøõË°åÁöÑÁîüÊàêÔºåÂÖàÂÅúÊ≠¢\n    if (isLoading && abortController) {\n      stopGeneration();\n      await new Promise(resolve => setTimeout(resolve, 100)); // Áü≠ÊöÇÂª∂Ëøü\n    }\n\n    // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      content,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setIsLoading(true);\n\n    // ÂàõÂª∫AIÊ∂àÊÅØÔºàÂàùÂßã‰∏∫Á©∫Ôºâ\n    const aiMessageId = (Date.now() + 1).toString();\n    const aiMessage: Message = {\n      id: aiMessageId,\n      content: '',\n      sender: 'assistant',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, aiMessage]);\n\n    // ÂàõÂª∫AbortControllerÁî®‰∫é‰∏≠Êñ≠ËØ∑Ê±Ç\n    const controller = new AbortController();\n    setAbortController(controller);\n\n    try {\n      let fullResponse = '';\n      \n      const onChunk = (chunk: string) => {\n        fullResponse += chunk;\n        setMessages(prev => prev.map(msg => \n          msg.id === aiMessageId \n            ? { ...msg, content: fullResponse }\n            : msg\n        ));\n      };\n\n      const onComplete = () => {\n        setIsLoading(false);\n        setAbortController(null);\n        setMessages(prev => prev.map(msg => \n          msg.id === aiMessageId \n            ? { ...msg, content: fullResponse.trim() }\n            : msg\n        ));\n      };\n\n      const onError = (error: string) => {\n        // Â¶ÇÊûúÊòØ‰∏ªÂä®‰∏≠Êñ≠Ôºå‰∏çÊòæÁ§∫ÈîôËØØ\n        if (error.includes('abort') || controller.signal.aborted) {\n          setIsLoading(false);\n          setAbortController(null);\n          return;\n        }\n        \n        console.error('Error:', error);\n        setMessages(prev => prev.map(msg => \n          msg.id === aiMessageId \n            ? { \n                ...msg, \n                content: `Êä±Ê≠âÔºåÊàëÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºö${error}\\n\\nÂ∑≤ÂàáÊç¢‰∏∫Ê®°ÊãüÊ®°ÂºèÔºå‰Ω†ÂèØ‰ª•ÁªßÁª≠ËÅäÂ§©„ÄÇ` \n              }\n            : msg\n        ));\n        setIsLoading(false);\n        setAbortController(null);\n        setIsUsingRealAPI(false);\n      };\n\n      if (isUsingRealAPI) {\n        // ‰ΩøÁî®ÁúüÂÆûDeepSeek APIÔºàÈúÄË¶Å‰øÆÊîπAPIÂáΩÊï∞ÊîØÊåÅAbortControllerÔºâ\n        await sendMessageStream(\n          content, \n          onChunk, \n          onComplete, \n          onError,\n          controller // ‰º†ÈÄíAbortController\n        );\n      } else {\n        // Ê®°ÊãüAPI‰πüË¶ÅÊîØÊåÅ‰∏≠Êñ≠\n        await simulateStreamResponse(\n          content, \n          onChunk, \n          onComplete,\n          controller\n        );\n      }\n\n    } catch (error) {\n      // Â¶ÇÊûúÊòØ‰∏≠Êñ≠ÈîôËØØÔºåÂøΩÁï•\n      if (error instanceof Error && (error.name === 'AbortError' || error.message.includes('aborted'))) {\n        setIsLoading(false);\n        setAbortController(null);\n        return;\n      }\n      \n      console.error('Error:', error);\n      setMessages(prev => prev.map(msg => \n        msg.id === aiMessageId \n          ? { \n              ...msg, \n              content: 'Êä±Ê≠âÔºåÁΩëÁªúËøûÊé•Âá∫Áé∞ÈóÆÈ¢òÔºåËØ∑Á®çÂêéÂÜçËØï„ÄÇ' \n            }\n          : msg\n      ));\n      setIsLoading(false);\n      setAbortController(null);\n      setIsUsingRealAPI(false);\n    }\n  };\n\n  // Ê∑ªÂä†ÈîÆÁõòÂø´Êç∑ÈîÆÊîØÊåÅ\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Ctrl+. Êàñ Esc ÂÅúÊ≠¢ÁîüÊàê\n      if ((e.ctrlKey && e.key === '.') || e.key === 'Escape') {\n        if (isLoading) {\n          e.preventDefault();\n          stopGeneration();\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isLoading, stopGeneration]);\n\n  const handleClearChat = () => {\n    // Â¶ÇÊûúÊ≠£Âú®ÁîüÊàêÔºåÂÖàÂÅúÊ≠¢\n    if (isLoading && abortController) {\n      stopGeneration();\n    }\n    \n    setMessages([{\n      id: Date.now().toString(),\n      content: 'ÂØπËØùÂ∑≤Ê∏ÖÁ©∫„ÄÇÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÂêóÔºü',\n      sender: 'assistant',\n      timestamp: new Date()\n    }]);\n  };\n\n  const toggleAPI = () => {\n    // Â¶ÇÊûúÊ≠£Âú®ÁîüÊàêÔºåÂÖàÂÅúÊ≠¢\n    if (isLoading && abortController) {\n      stopGeneration();\n    }\n    \n    setIsUsingRealAPI(!isUsingRealAPI);\n    const status = !isUsingRealAPI ? 'ÁúüÂÆûDeepSeek API' : 'Ê®°ÊãüÊ®°Âºè';\n    alert(`Â∑≤ÂàáÊç¢Âà∞${status}`);\n  };\n\n  return (\n    <div className=\"chat-interface\">\n      <div className=\"chat-header\">\n        <div className=\"header-left\">\n          <h1>ü§ñ DeepSeek AIÂä©Êâã</h1>\n          <div className=\"model-info\">\n            <span className=\"model-tag\">DeepSeek</span>\n            <span className=\"status-indicator\">\n              ‚óè {isUsingRealAPI ? 'ÁúüÂÆûAPI' : 'Ê®°ÊãüÊ®°Âºè'}\n            </span>\n            {isLoading && (\n              <button \n                className=\"stop-button\"\n                onClick={stopGeneration}\n                title=\"ÂÅúÊ≠¢ÁîüÊàê (Esc Êàñ Ctrl+.)\"\n              >\n                ‚èπÔ∏è ÂÅúÊ≠¢ÁîüÊàê\n              </button>\n            )}\n            <button \n              className=\"api-toggle-button\"\n              onClick={toggleAPI}\n              title={isUsingRealAPI ? 'ÂàáÊç¢Âà∞Ê®°ÊãüÊ®°Âºè' : 'ÂàáÊç¢Âà∞ÁúüÂÆûAPI'}\n              disabled={isLoading}\n            >\n              {isUsingRealAPI ? 'üîå Ê®°ÊãüÊ®°Âºè' : '‚ö° ÁúüÂÆûAPI'}\n            </button>\n          </div>\n        </div>\n        <button \n          className=\"clear-button\"\n          onClick={handleClearChat}\n          title=\"Ê∏ÖÁ©∫ÂØπËØù\"\n          disabled={isLoading}\n        >\n          Ê∏ÖÁ©∫ÂØπËØù\n        </button>\n      </div>\n      \n      <div className=\"chat-messages-container\">\n        <MessageList messages={messages} isLoading={isLoading} />\n        <div ref={messagesEndRef} />\n      </div>\n      \n      <InputArea \n        onSendMessage={handleSendMessage}\n        isLoading={isLoading}\n        onStopGeneration={stopGeneration} // ‰º†ÈÄíÁªôInputArea\n      />\n      \n      {isUsingRealAPI && (\n        <div className=\"api-notice\">\n          ‚ö° Ê≠£Âú®‰ΩøÁî®ÁúüÂÆûDeepSeek APIÔºåËØ∑Á°Æ‰øùÂêéÁ´ØÊúçÂä°Âô®Â∑≤ÂêØÂä®\n          {isLoading && ' | Êåâ Esc Êàñ Ctrl+. ÂÅúÊ≠¢ÁîüÊàê'}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}